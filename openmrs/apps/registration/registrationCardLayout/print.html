<script>
//window.onload = wba_demo_print();
//window.onload =  setTimeout('wba_demo_print()', 100);

function wba_demo_print() 
{
	var zpl = "^XA^CI28^PW1300^MTT^FO080,40^AUN^FDtest name^FS^FO080,120^AUN^FDWBA100001^FS^FO080,190^ATN^FD20000101M^FS^FO680,40^FB520,1,0,R,0^AUN,140,110^FD{{patient.identifier}}^FS^FO780,160^ATN^BY4^BCN,150,N^F123456^FS^XZ";
	print_this(zpl, "192.168.1.11");
}

function print_this(zpl, ip_addr)
{
	var output = document.getElementById("output");
	var url = "http://"+ip_addr+"/pstprnt";
	var method = "POST";
	var async = true;
	var request = new XMLHttpRequest();

	request.onload = function () {
		var status = request.status; // HTTP response status, e.g., 200 for "200 OK"
		var data = request.responseText; // Returned data, e.g., an HTML document.
		output.innerHTML = "Status: " + status + "<br>" + data;
	}

	request.open(method, url, async);
	request.setRequestHeader("Content-Length", zpl.length);

	// Actually sends the request to the server.
	request.send(zpl);
}
</script>

<button onclick='wba_demo_print(); return false;'>Print WBA demo</button>

<link rel="stylesheet" href="/bahmni_config/openmrs/apps/registration/registrationCardLayout/css/print.css"/>
<table border="1" cellpadding="0" cellspacing="1" class="registrationCard-print-table">
    <tbody>
    <tr>
        <td  class="print-table-left">
            <table>
                <tr>

                    <td>
                        <h3 class="print-table-header">Notice</h3>
                        <ul class="print-table-left-body">
                            <li>
                                It is quite important to bring the card to the hospital.
                            </li>
                            <li>
                                Take medicines according to instructions of the doctor.
                            </li>
                            <li>
                                Registration Timings are from 8:30 am to 12:00 pm.
                            </li>
                            <li>
                                OPD days are on Monday, Wednesday, Friday.
                            </li>
                            <li>
                                Sundays are holidays.
                            </li>
                        </ul>
                        <div class="caution">
                            <h3 class="print-table-header">Caution</h3>
                            <p>
                                Smoking, Tobacco chewing can cause cancer, heart diseases and asthama.
                            </p>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="print-table-right" valign="top">
            <table>
                <tr>
                    <td class="logo">
                        <p>
                            <img src="/bahmni_config/openmrs/apps/registration/registrationCardLayout/images/bahmni-icon.png" style="width: 12mm; height: 12mm; "/>
                        </p>
                    </td>
                    <td class="print-table-right-header">
                        <h3>
                            Jan Swasthya Sahyog
                        </h3>
                        <h3 class="print-center">(Registered)</h3>
                    </td>
                    <td class="registrationCard-photo">
                        <img ng-src="{{patient.image}}" style="width: 20mm; height: 20mm; "
                             onerror="this.onerror=null;this.src='../images/blank.jpeg';"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" class="print-center registrationCard-location">
                        Ganiyari, District - Bilaspur
                    </td>
                </tr>
            </table>
            <table class="registrationCard-details">
                <tbody>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Dated</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.registrationDate | bahmniDate}} </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Registration</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.identifier}} </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Name</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>
                        <span class="hindi-text">{{patient.fullNameLocal()}}</span>
                    </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Age</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.age | age}} </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Gender</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.gender}} </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Address</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.primaryRelative}} </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Village</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.address.cityVillage}} </td>
                </tr>
                <tr>
                    <td class="registrationCard-details-name">
                        <span class="hindi-text">Address2</span>
                    </td>
                    <td class="registrationCard-details-seperator"> :  </td>
                    <td>{{patient.address.address2}} </td>
                </tr>
                </tbody>
            </table>
        </td>
    </tr>
    </tbody>
</table>
