<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!-- This changeset is meant to contain patient relationship types -->
    <changeSet id="BAHMNI-IMPL-OMRS-RELATIONSHIPS-001" author="tw" runOnChange="true">
        <comment>Add Relationship types</comment>
        <sql>
            INSERT INTO relationship_type (a_is_to_b, b_is_to_a, preferred, weight, description, creator, uuid, date_created)
            VALUES ('Doctor', 'Patient', 0, 0, 'Relationship from a primary care provider to the patient', 1, uuid(), NOW());

            INSERT INTO relationship_type (a_is_to_b, b_is_to_a, preferred, weight, description, creator, uuid, date_created)
            VALUES ('Sibling', 'Sibling', 0, 0, 'Relationship between brother/sister, brother/brother, and sister/sister', 1, uuid(), NOW());

            INSERT INTO relationship_type (a_is_to_b, b_is_to_a, preferred, weight, description, creator, uuid, date_created)
            VALUES ('Parent', 'Child', 0, 0, 'Relationship from a mother/father to the child', 1, uuid(), NOW());
        </sql>
    </changeSet>
    <!-- This changeset is meant to contain patient relationship types -->
    <changeSet id="BAHMNI-IMPL-OMRS-RELATIONSHIPS-002" author="tw">
        <comment>Add global property for relationshipTypeMap</comment>
        <sql>
            INSERT INTO global_property (property, property_value, description, uuid) VALUES ('bahmni.relationshipTypeMap','{"provider":["Doctor"],"patient":["Parent","Sibling"]}', 'Relationships type maps for providers', UUID());
        </sql>
    </changeSet>
</databaseChangeLog>